<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>account</title>
	<meta charset="utf-8">
	<meta name="author" content="Jun">

	<link href="/css/bootstrap/bootstrap.min.css" rel="stylesheet">
	<script src="/js/bootstrap/bootstrap.bundle.min.js"></script>
	<script src="/js/jquery-3.6.3.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script th:inline="javascript">
		var expenseList = [[${expenseList}]];
		var fix = [[#{account.fix}]];
		var fluct = [[#{account.fluct}]];
		var etc = [[#{account.etc}]];
		var total = [[#{account.total}]];
	</script>
	<script src="/js/accountChart.js"></script>
	<script src="/js/account.js"></script>
</head>
<body>

<div class="container">
<!--	<p th:text="${loginUser.id}"/>-->
<!--	<p th:text="${loginUser.uuid}"/>-->
	<!-- Button trigger modal -->
	<div><canvas id="accountChart"></canvas></div>

	<div class="row my-3">
		<div class="col12 text-lg-end">
			<button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">등록하기</button>
		</div>
	</div>
	<table class="table table-dark table-hover">
		<thead>
		<tr>
			<th scope="col" th:text="#{account.divide}"></th>
			<th scope="col" th:text="#{account.total}"></th>
			<th scope="col" th:text="#{account.fix}"></th>
			<th scope="col" th:text="#{account.fluct}"></th>
			<th scope="col" th:text="#{account.etc}"></th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="expense : ${expenseList}">
			<td th:text="${#dates.format(expense.aggDate, 'yyyy.MM.')}" th:onclick="getDetailData([[${expense.aggDate}]])"></td>
			<td th:text="${#numbers.formatInteger(expense.fix + expense.fluct + expense.etc, 3, 'COMMA')}"/>
			<td th:text="${#numbers.formatInteger(expense.fix, 3, 'COMMA')}"/>
			<td th:text="${#numbers.formatInteger(expense.fluct, 3, 'COMMA')}"/>
			<td th:text="${#numbers.formatInteger(expense.etc, 3, 'COMMA')}"/>
		</tr>
		</tbody>
	</table>
	<!--
	1. 연도별 드랍다운 선택
		* 월별현황 조회
	2. 월별 현황 선택
		* 상세 항목 조회 / 추가 / 수정 / 삭제
		* 추가할 때,
			* 고정 / 가변 선택
			* category 선택
	3. 월별 현황 추가
		* 같은 년월 추가 X (검증 필요)
	 -->

	<!-- Modal -->
	<div class="modal fade modal-dialog-scrollable"
	     id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="staticBackdropLabel">등록</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="input-group input-group-sm mb-3">
						<span class="input-group-text" id="inputGroup-sizing-sm1">고정</span>
						<input type="text" id="fix" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm1" required>
					</div>
					<div class="input-group input-group-sm mb-3">
						<span class="input-group-text" id="inputGroup-sizing-sm2">가변</span>
						<input type="text" id="fluct" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm2" required>
					</div>
					<div class="input-group input-group-sm mb-3">
						<span class="input-group-text" id="inputGroup-sizing-sm3">기타</span>
						<input type="text" id="etc" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm3" required>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
					<button type="button" th:onclick="saveData()" class="btn btn-primary">저장</button>
				</div>
			</div>
		</div>
	</div>

</div>

</body>
</html>